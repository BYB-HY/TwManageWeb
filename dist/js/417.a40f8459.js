"use strict";(self["webpackChunkmanage"]=self["webpackChunkmanage"]||[]).push([[417],{833:function(e,t,a){a.d(t,{Z:function(){return u}});var r=function(){var e=this,t=e._self._c;return t("div",[t("el-breadcrumb",{attrs:{separator:"/"}},e._l(e.breadList,(function(a,r){return t("el-breadcrumb-item",{key:r},[e._v(e._s(a))])})),1)],1)},l=[],s={data(){return{breadList:[]}},created(){this.getBreadCrumb()},watch:{$route(){this.getBreadCrumb()}},methods:{getBreadCrumb(){this.breadList=this.$route.meta.bread||[]}}},o=s,i=a(1001),n=(0,i.Z)(o,r,l,!1,null,"5fe194f7",null),u=n.exports},1417:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var r=function(){var e=this,t=e._self._c;return t("div",[t("BreadCrumb"),t("el-card",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.edit()}}},[e._v("新建用户")]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[t("el-table-column",{attrs:{fixed:"",prop:"account",label:"账户",width:"150"}}),t("el-table-column",{attrs:{prop:"name",label:"昵称",width:"120"}}),t("el-table-column",{attrs:{prop:"role_tables",label:"角色",width:"120"}}),t("el-table-column",{attrs:{prop:"status",label:"状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(1===t.row.status?"开启":"关闭")+" ")]}}])}),t("el-table-column",{attrs:{prop:"create_time",label:"创建时间",width:"120"}}),t("el-table-column",{attrs:{prop:"memo",label:"备注"}}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.edit(a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.deletes(a.row.employee_id)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{staticClass:"fr mt mb",attrs:{"current-page":e.params.page,"page-sizes":[20,50,100,200],"page-size":e.params.per_page,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("UserModal",{attrs:{visible:e.visible,userData:e.userData},on:{hide:function(t){e.visible=!1},reload:function(t){return e.loadData()}}})],1)},l=[],s=a(833),o=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:e.title,visible:e.visible,width:"50%","before-close":e.close}},[t("el-row",{attrs:{gutter:20}},[t("el-form",{ref:"ruleform",attrs:{model:e.ruleForm,"label-width":"80px",rules:e.rules}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"账户",prop:"account"}},[t("el-input",{model:{value:e.ruleForm.account,callback:function(t){e.$set(e.ruleForm,"account",t)},expression:"ruleForm.account"}})],1),t("el-form-item",{attrs:{label:"昵称",prop:"name"}},[t("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),t("el-form-item",{attrs:{label:"角色",prop:"role_tables"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.role_tables,callback:function(t){e.$set(e.ruleForm,"role_tables",t)},expression:"ruleForm.role_tables"}},e._l(e.roleList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.role_type,value:e.role_type}})})),1)],1),t("el-form-item",{attrs:{label:"状态",prop:"status"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),t("el-form-item",{attrs:{label:"确认密码",prop:"password"}},[t("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),t("el-form-item",{attrs:{label:"备注",prop:"memo"}},[t("el-input",{model:{value:e.ruleForm.memo,callback:function(t){e.$set(e.ruleForm,"memo",t)},expression:"ruleForm.memo"}})],1)],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.close}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)],1)},i=[],n=a(212),u={props:["visible","userData"],data(){return{ruleForm:{},roleList:{},value:"",rules:{name:[{required:!0,message:"不能为空",trigger:"blur"}]},title:"新建订单"}},mounted(){this.getRoleList()},methods:{async getRoleList(){const e=await(0,n.U2)("/role/get_role_permissions_list");this.roleList=e.dataRole},close(){this.$emit("hide")},save(){this.$refs.ruleform.validate((e=>{if(e){const e=this.ruleForm.employee_id;e?(0,n.v_)(`/employees/${e}`,this.ruleForm).then((()=>{console.log(this.$notify,this),this.$notify({title:"操作成功",type:"success"}),this.close(),this.$emit("reload")})):(0,n.v_)("/employees/entry",this.ruleForm).then((()=>{this.$notify({title:"操作成功",type:"success"}),this.close(),this.$emit("reload")}))}}))}},watch:{userData(){this.title=this.userData.account?"编辑信息":"新建用户",this.ruleForm=this.userData}}},c=u,m=a(1001),p=(0,m.Z)(c,o,i,!1,null,"902e33f4",null),d=p.exports,h={name:"UserList",components:{BreadCrumb:s.Z,UserModal:d},data(){return{tableData:[],params:{searchValue:"",page:1,per_page:20},total:0,visible:!1,loading:!1,userData:""}},created(){this.getList()},methods:{async getList(){this.loading=!0;const e=await(0,n.U2)("/user/get_users_list",this.params);this.tableData=e.data.rows,this.total=e.data.count,this.loading=!1},handleSizeChange(e){this.params.per_page=e,this.loadData()},handleCurrentChange(e){this.params.page=e,this.loadData()},edit(e){this.userData=e?{...e}:{status:1},this.visible=!0}}},b=h,f=(0,m.Z)(b,r,l,!1,null,null,null),g=f.exports}}]);
//# sourceMappingURL=417.a40f8459.js.map