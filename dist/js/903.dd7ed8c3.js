"use strict";(self["webpackChunkmanage"]=self["webpackChunkmanage"]||[]).push([[903],{833:function(e,t,l){l.d(t,{Z:function(){return u}});var a=function(){var e=this,t=e._self._c;return t("div",[t("el-breadcrumb",{attrs:{separator:"/"}},e._l(e.breadList,(function(l,a){return t("el-breadcrumb-item",{key:a},[e._v(e._s(l))])})),1)],1)},r=[],i={data(){return{breadList:[]}},created(){this.getBreadCrumb()},watch:{$route(){this.getBreadCrumb()}},methods:{getBreadCrumb(){this.breadList=this.$route.meta.bread||[]}}},s=i,o=l(1001),n=(0,o.Z)(s,a,r,!1,null,"5fe194f7",null),u=n.exports},9903:function(e,t,l){l.r(t),l.d(t,{default:function(){return _}});var a=function(){var e=this,t=e._self._c;return t("div",[t("BreadCrumb"),t("el-card",{staticClass:"mt"},[t("el-row",[t("el-col",{attrs:{span:6}},[t("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入员工号或姓名"},model:{value:e.params.searchValue,callback:function(t){e.$set(e.params,"searchValue",t)},expression:"params.searchValue"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),t("el-col",{staticClass:"operate",attrs:{span:18}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.visible=!0}}},[e._v("员工入职")])],1)],1)],1),t("el-card",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection"}}),t("el-table-column",{attrs:{prop:"employee_id",label:"员工号",width:"100",fixed:"left"}}),t("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120",fixed:"left"}}),t("el-table-column",{attrs:{prop:"mobile_phone",label:"手机",width:"250"}}),t("el-table-column",{attrs:{prop:"QQ",label:"QQ",width:"250"}}),t("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"250"}}),t("el-table-column",{attrs:{prop:"landline_phone",label:"座机电话",width:"200"}}),t("el-table-column",{attrs:{prop:"begin_date",label:"入职时间",width:"250"}}),t("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.edit(l.row)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.deletes(l.row.employee_id)}}},[e._v("离职")])]}}])})],1),t("el-pagination",{staticClass:"fr mt mb",attrs:{"current-page":e.params.page,"page-sizes":[10,20,30,40],"page-size":e.params.per_page,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("StaffModal",{attrs:{visible:e.visible},on:{hide:function(t){e.visible=!1},reload:function(t){return e.loadData()}}})],1)},r=[],i=l(833),s=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:e.title,visible:e.visible,width:"50%","before-close":e.close}},[t("el-row",{attrs:{gutter:20}},[t("el-form",{ref:"ruleform",attrs:{model:e.ruleForm,"label-width":"80px",rules:e.rules}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"员工号",prop:"employee_id"}},[e._v(" "+e._s(e.ruleForm.employee_id)+" ")]),t("el-form-item",{attrs:{label:"姓名",prop:"name"}},[t("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),t("el-form-item",{attrs:{label:"座机电话",prop:"landline_phone"}},[t("el-input",{model:{value:e.ruleForm.landline_phone,callback:function(t){e.$set(e.ruleForm,"landline_phone",t)},expression:"ruleForm.landline_phone"}})],1),t("el-form-item",{attrs:{prop:"mobile_phone",label:"手机"}},[t("el-input",{model:{value:e.ruleForm.mobile_phone,callback:function(t){e.$set(e.ruleForm,"mobile_phone",t)},expression:"ruleForm.mobile_phone"}})],1),t("el-form-item",{attrs:{prop:"QQ",label:"QQ"}},[t("el-input",{model:{value:e.ruleForm.QQ,callback:function(t){e.$set(e.ruleForm,"QQ",t)},expression:"ruleForm.QQ"}})],1),t("el-form-item",{attrs:{prop:"email",label:"邮箱"}},[t("el-input",{model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{prop:"begin_date",label:"入职时间"}},[t("el-input",{model:{value:e.ruleForm.begin_date,callback:function(t){e.$set(e.ruleForm,"begin_date",t)},expression:"ruleForm.begin_date"}})],1)],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.close}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)],1)},o=[],n=l(212),u=l(3822),m={props:["visible"],data(){return{ruleForm:{employee_id:"",name:"",landline_phone:"",mobile_phone:"",QQ:"",email:"",begin_date:""},rules:{name:[{required:!0,message:"不能为空",trigger:"blur"}],email:[{required:!0,message:"不能为空",trigger:"blur"}],begin_date:[{required:!0,message:"不能为空",trigger:"blur"}],cargo:[{required:!0,message:"不能为空",trigger:"blur"}],count:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^\d+$/,message:"只能为数字",trigger:"blur"}],unit:[{required:!0,message:"不能为空",trigger:"blur"}],price:[{required:!0,message:"不能为空",trigger:"blur"}],from:[{required:!0,message:"不能为空",trigger:"change"}],pay:[{required:!0,message:"不能为空",trigger:"change"}]},title:"新建订单"}},computed:{...(0,u.rn)(["row"])},watch:{visible(){this.title=this.row.name?"编辑信息":"员工入职",this.ruleForm=this.row}},methods:{...(0,u.OI)(["clearRow"]),close(){this.$refs.ruleform.resetFields(),this.$emit("hide"),this.clearRow()},save(){this.$refs.ruleform.validate((e=>{if(e){const e=this.ruleForm.employee_id;e?(0,n.v_)(`/employees/${e}`,this.ruleForm).then((()=>{console.log(this.$notify,this),this.$notify({title:"操作成功",type:"success"}),this.close(),this.$emit("reload")})):(0,n.v_)("/employees/entry",this.ruleForm).then((()=>{this.$notify({title:"操作成功",type:"success"}),this.close(),this.$emit("reload")}))}}))}}},c=m,d=l(1001),p=(0,d.Z)(c,s,o,!1,null,"61da4a46",null),h=p.exports,b={components:{BreadCrumb:i.Z,StaffModal:h},data(){return{tableData:[],loading:!1,total:0,select:"",params:{searchValue:"",page:1,per_page:10},visible:!1}},created(){this.loadData()},methods:{async loadData(){this.loading=!0;const e=await(0,n.v_)("/employees/list",this.params);this.tableData=e.data.rows,this.total=e.data.count,this.loading=!1},handleSizeChange(e){this.params.per_page=e,this.loadData()},handleCurrentChange(e){this.params.page=e,this.loadData()},handleSelectionChange(e){this.select=e},operate(e){let t=this.select.map((e=>e.id));this.$notify({title:"操作成功",message:[t,e],type:"success"})},deletes(e){(0,n.qb)(`/employees/${e}/dimission`).then((()=>{this.$message({message:"操作成功",type:"success"}).then((()=>{this.loadData}))}))},...(0,u.OI)(["setRow"]),edit(e){this.setRow(e),this.visible=!0}}},g=b,f=(0,d.Z)(g,a,r,!1,null,"c03468ea",null),_=f.exports}}]);
//# sourceMappingURL=903.dd7ed8c3.js.map