"use strict";(self["webpackChunkmanage"]=self["webpackChunkmanage"]||[]).push([[448],{833:function(e,t,r){r.d(t,{Z:function(){return u}});var a=function(){var e=this,t=e._self._c;return t("div",[t("el-breadcrumb",{attrs:{separator:"/"}},e._l(e.breadList,(function(r,a){return t("el-breadcrumb-item",{key:a},[e._v(e._s(r))])})),1)],1)},l=[],i={data(){return{breadList:[]}},created(){this.getBreadCrumb()},watch:{$route(){this.getBreadCrumb()}},methods:{getBreadCrumb(){this.breadList=this.$route.meta.bread||[]}}},s=i,o=r(1001),n=(0,o.Z)(s,a,l,!1,null,"5fe194f7",null),u=n.exports},3448:function(e,t,r){r.r(t),r.d(t,{default:function(){return v}});var a=function(){var e=this,t=e._self._c;return t("div",[t("Bread-Crumb"),t("el-card",{staticClass:"mt"},[t("el-row",[t("el-col",{attrs:{span:6}},[t("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入标题"},model:{value:e.params.searchValue,callback:function(t){e.$set(e.params,"searchValue",t)},expression:"params.searchValue"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),t("el-col",{staticClass:"operate",attrs:{span:18}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.visible=!0}}},[e._v("添加提醒")])],1)],1)],1),t("el-card",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection"}}),t("el-table-column",{attrs:{prop:"title",label:"标题",width:"180",fixed:"left"}}),t("el-table-column",{attrs:{prop:"expiry_date",label:"到期时间",width:"180",fixed:"left"}}),t("el-table-column",{attrs:{prop:"descr",label:"备注",width:"180"}}),t("el-table-column",{attrs:{prop:"recurring",label:"循环",width:"180"}}),t("el-table-column",{attrs:{prop:"recurring_type",label:"循环类型",width:"180"}}),t("el-table-column",{attrs:{prop:"recurring_value",label:"循环值",width:"180"}}),t("el-table-column",{attrs:{prop:"created_at",label:"创建时间",width:"180"}}),t("el-table-column",{attrs:{prop:"updated_at",label:"更新时间",width:"180"}}),t("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.edit(r.row)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.deletes(r.row.id)}}},[e._v("删除")])]}}])}),t("el-table-column",{attrs:{label:"开启",width:"80",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-tooltip",{attrs:{content:"Switch value: "+r.row.enabled,placement:"top"}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(e){r.row.enabled=0}},model:{value:r.row.enabled,callback:function(t){e.$set(r.row,"enabled",t)},expression:"scoped.row.enabled "}})],1)]}}])})],1),t("el-pagination",{staticClass:"fr mt mb",attrs:{"current-page":e.params.page,"page-sizes":[10,20,30,40],"page-size":e.params.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("Reminder-modal",{attrs:{visible:e.visible},on:{hide:function(t){e.visible=!1},reload:function(t){return e.loadData()}}})],1)},l=[],i=r(833),s=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:e.title,visible:e.visible,width:"50%","before-close":e.close}},[t("el-row",{attrs:{gutter:20}},[t("el-form",{ref:"ruleform",attrs:{model:e.ruleForm,"label-width":"80px",rules:e.rules}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"标题",prop:"title"}},[t("el-input",{model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),t("el-form-item",{attrs:{label:"到期时间",prop:"expiry_date"}},[t("el-input",{model:{value:e.ruleForm.expiry_date,callback:function(t){e.$set(e.ruleForm,"expiry_date",t)},expression:"ruleForm.expiry_date"}})],1),t("el-form-item",{attrs:{prop:"recurring",label:"循环"}},[t("el-input",{model:{value:e.ruleForm.recurring,callback:function(t){e.$set(e.ruleForm,"recurring",t)},expression:"ruleForm.recurring"}})],1),t("el-form-item",{attrs:{prop:"recurring_type",label:"循环类型"}},[t("el-input",{model:{value:e.ruleForm.recurring_type,callback:function(t){e.$set(e.ruleForm,"recurring_type",t)},expression:"ruleForm.recurring_type"}})],1),t("el-form-item",{attrs:{prop:"recurring_value",label:"循环值"}},[t("el-input",{model:{value:e.ruleForm.recurring_value,callback:function(t){e.$set(e.ruleForm,"recurring_value",t)},expression:"ruleForm.recurring_value"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{prop:"created_at",label:"创建时间"}},[t("el-input",{model:{value:e.ruleForm.created_at,callback:function(t){e.$set(e.ruleForm,"created_at",t)},expression:"ruleForm.created_at"}})],1),t("el-form-item",{attrs:{label:"更新时间",prop:"updated_at"}},[t("el-input",{model:{value:e.ruleForm.updated_at,callback:function(t){e.$set(e.ruleForm,"updated_at",t)},expression:"ruleForm.updated_at"}})],1),t("el-form-item",{attrs:{label:"备注",prop:"descr"}},[t("el-input",{model:{value:e.ruleForm.descr,callback:function(t){e.$set(e.ruleForm,"descr",t)},expression:"ruleForm.descr"}})],1),t("el-form-item",{attrs:{label:"开启",prop:"enabled"}},[t("el-input",{model:{value:e.ruleForm.enabled,callback:function(t){e.$set(e.ruleForm,"enabled",t)},expression:"ruleForm.enabled"}})],1)],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.close}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)],1)},o=[],n=r(212),u=r(3822),c={props:["visible"],data(){return{ruleForm:{id:"",title:"",expiry_date:"",descr:"",recurring:"",recurring_type:"",recurring_value:"",created_at:"",updated_at:"",enabled:""},rules:{name:[{required:!0,message:"不能为空",trigger:"blur"}],email:[{required:!0,message:"不能为空",trigger:"blur"}],begin_date:[{required:!0,message:"不能为空",trigger:"blur"}],cargo:[{required:!0,message:"不能为空",trigger:"blur"}],count:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^\d+$/,message:"只能为数字",trigger:"blur"}],unit:[{required:!0,message:"不能为空",trigger:"blur"}],price:[{required:!0,message:"不能为空",trigger:"blur"}],from:[{required:!0,message:"不能为空",trigger:"change"}],pay:[{required:!0,message:"不能为空",trigger:"change"}]},title:"添加提醒"}},computed:{...(0,u.rn)(["row"])},watch:{visible(){this.title=this.row.name?"编辑提醒":"添加提醒",this.ruleForm=this.row}},methods:{...(0,u.OI)(["clearRow"]),close(){this.$refs.ruleform.resetFields(),this.$emit("hide"),this.clearRow()},save(){this.$refs.ruleform.validate((e=>{if(e){const e=this.ruleForm.id;e?(0,n.qb)(`/reminder/edit/${e}`,this.ruleForm).then((()=>{this.$notify({title:"操作成功",type:"success"}),this.close(),this.$emit("reload")})):(0,n.v_)("/reminder/create",this.ruleForm).then((()=>{this.$notify({title:"操作成功",type:"success"}),this.close(),this.$emit("reload")}))}}))}}},d=c,m=r(1001),p=(0,m.Z)(d,s,o,!1,null,"663be4be",null),b=p.exports,g={components:{BreadCrumb:i.Z,ReminderModal:b},data(){return{tableData:[],loading:!1,total:0,select:"",params:{searchValue:"",page:1,pageSize:10},visible:!1,value:""}},created(){this.loadData()},methods:{async loadData(){this.loading=!0;const e=await(0,n.U2)("/reminder/list",this.params);this.tableData=e.data.rows,console.log(this.tableData),this.total=e.data.count,this.loading=!1},handleSizeChange(e){this.params.pageSize=e,this.loadData()},handleCurrentChange(e){this.params.page=e,this.loadData()},handleSelectionChange(e){this.select=e},operate(e){let t=this.select.map((e=>e.id));this.$notify({title:"操作成功",message:[t,e],type:"success"})},deletes(e){(0,n.HG)(`/reminders/delete/${e}`).then((()=>{this.$message({message:"操作成功",type:"success"}).then((()=>{this.loadData()}))}))},...(0,u.OI)(["setRow"]),edit(e){this.setRow(e),this.visible=!0}}},h=g,f=(0,m.Z)(h,a,l,!1,null,"e04654c2",null),v=f.exports}}]);
//# sourceMappingURL=448.d53622be.js.map