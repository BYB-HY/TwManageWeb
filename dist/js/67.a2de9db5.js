"use strict";(self["webpackChunkmanage"]=self["webpackChunkmanage"]||[]).push([[67],{833:function(e,t,i){i.d(t,{Z:function(){return d}});var s=function(){var e=this,t=e._self._c;return t("div",[t("el-breadcrumb",{attrs:{separator:"/"}},e._l(e.breadList,(function(i,s){return t("el-breadcrumb-item",{key:s},[e._v(e._s(i))])})),1)],1)},n=[],l={data(){return{breadList:[]}},created(){this.getBreadCrumb()},watch:{$route(){this.getBreadCrumb()}},methods:{getBreadCrumb(){this.breadList=this.$route.meta.bread||[]}}},a=l,r=i(1001),o=(0,r.Z)(a,s,n,!1,null,"5fe194f7",null),d=o.exports},3067:function(e,t,i){i.r(t),i.d(t,{default:function(){return v}});var s=function(){var e=this,t=e._self._c;return t("div",[t("BreadCrumb"),t("el-card",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.edit()}}},[e._v("新建角色")]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[t("el-table-column",{attrs:{fixed:"",prop:"role_type",label:"角色",width:"150"}}),t("el-table-column",{attrs:{prop:"permissions",label:"权限"},scopedSlots:e._u([{key:"default",fn:function(i){return e._l(i.row.permissions,(function(i){return t("span",{key:i.index},[e._v(e._s(i.name))])}))}}])}),t("el-table-column",{attrs:{prop:"zip",label:"备注",width:"120"}}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.edit(i.row)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.deletes(i.row.employee_id)}}},[e._v("删除")])]}}])})],1)],1),t("RoleModal",{attrs:{visible:e.visible,permission:e.permission,name:e.name},on:{hide:function(t){e.visible=!1},reload:function(t){return e.loadData()}}})],1)},n=[],l=i(833),a=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.title,visible:e.visible,width:"50%","before-close":e.close}},[t("div",[e._v("角色："),t("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.name2,callback:function(t){e.name2=t},expression:"name2"}})],1),e._l(e.permission,(function(i){return t("el-checkbox",{key:i.id,attrs:{label:i.name,border:""},model:{value:i.checked,callback:function(t){e.$set(i,"checked",t)},expression:"item.checked"}})})),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.close}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],2)},r=[],o=i(212),d={props:["visible","name","permission"],data(){return{title:"",name2:""}},watch:{visible(){this.ruleForm=this.row},name(){this.title=this.name?"编辑权限":"新建角色",this.name2=this.name}},methods:{close(){this.$emit("hide")},save(){this.$refs.ruleform.validate((e=>{if(e){const e=this.ruleForm.employee_id;e?(0,o.v_)(`/employees/${e}`,this.ruleForm).then((()=>{this.$notify({title:"操作成功",type:"success"}),this.close(),this.$emit("reload")})):(0,o.v_)("/employees/entry",this.ruleForm).then((()=>{this.$notify({title:"操作成功",type:"success"}),this.close(),this.$emit("reload")}))}}))}}},c=d,u=i(1001),m=(0,u.Z)(c,a,r,!1,null,"203a824d",null),h=m.exports,p={name:"UserList",components:{BreadCrumb:l.Z,RoleModal:h},data(){return{tableData:[],loading:!1,visible:!1,allPermissions:{},name:"",permission:""}},mounted(){this.getList()},methods:{async getList(){this.loading=!0;const e=await(0,o.U2)("/role/get_role_permissions_list");this.tableData=e.dataRole,this.allPermissions=e.dataPermissions,this.loading=!1},edit(e){if(e){const{role_type:t,permissions:i}=e;this.permission=this.allPermissions.map((e=>{const t=i.find((t=>t.id===e.id));return t?{...e,checked:!0}:{...e,checked:!1}})),this.name=t}else this.permission=this.allPermissions,this.name="";this.visible=!0}}},b=p,f=(0,u.Z)(b,s,n,!1,null,null,null),v=f.exports}}]);
//# sourceMappingURL=67.a2de9db5.js.map